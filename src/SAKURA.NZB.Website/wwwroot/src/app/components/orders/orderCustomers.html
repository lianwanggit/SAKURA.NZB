<table class="customers-container">
    <tr>
        <td [class.hidden]="viewMode">
            <alpha-indexer [elements]="elementSource" (selectedId)="onElementSelected($event)" [initialSelectedId]="customerId" [height]="750"></alpha-indexer>
        </td>
        <td class="customer-details" [ngClass]="{splitter: !viewMode}">
            <div class="alert alert-info" role="alert" *ngIf="!viewMode && selectedCustomer == null"><i class="fa fa-warning"></i> 请选择至少一个客户</div>

            <div class="card" *ngIf="selectedCustomer != null">
                <div class="card-header">
                    客户
                </div>

                <div class="card-block">
                    <h4 class="card-title">{{selectedCustomer.fullName}}</h4>
                    <p class="card-text">
                        <input type="radio" id="radio01" name="phoneRadio" checked="checked" *ngIf="!viewMode && selectedCustomer.phone2 != null"
                               (click)="onSelectPhone(selectedCustomer.phone1)" />
                        <label for="radio01"><span></span><i class="fa fa-phone"></i> {{selectedCustomer.phone1}}</label>
                    </p>
                    <p class="card-text" *ngIf="selectedCustomer.phone2 != null">
                        <input type="radio" id="radio02" name="phoneRadio" *ngIf="!viewMode"
                               (click)="onSelectPhone(selectedCustomer.phone2)" />
                        <label for="radio02"><span></span><i class="fa fa-phone"></i> {{selectedCustomer.phone2}}</label>
                    </p>
                    <p class="text-divider" *ngIf="selectedCustomer.phone2 != null || selectedCustomer.address1 != null"></p>
                    <p class="card-text">
                        <input type="radio" id="radio03" name="addressRadio" checked="checked" *ngIf="!viewMode && selectedCustomer.address1 != null"
                               (click)="onSelectAddress(selectedCustomer.address)" />
                        <label for="radio03"><span></span><i class="fa fa-home"></i> {{selectedCustomer.address}}</label>
                    </p>
                    <p class="card-text" *ngIf="selectedCustomer.address1 != null">
                        <input type="radio" id="radio04" name="addressRadio" *ngIf="!viewMode"
                               (click)="onSelectAddress(selectedCustomer.address1)" />
                        <label for="radio04"><span></span><i class="fa fa-home"></i> {{selectedCustomer.address1}}</label>
                    </p>

                </div>

                <ul class="list-group list-group-flush" *ngIf="!viewMode || exCustomers.length">
                    <li class="list-group-item">
                        <div class="token" *ngFor="#ec of exCustomers">
                            <span class="token-label" style="max-width: 620px;">{{ec.customerName}}</span>
                            <a (click)="onRemoveExCustomer(ec.customerId)" class="close" tabindex="-1" *ngIf="!viewMode"><i class="fa fa-remove"></i></a>
                        </div>

                        <div class="input-group" *ngIf="!viewMode">
                            <span class="input-group-addon">附加客户</span>
                            <input id="exCustomer" class="form-control"
                                   [(ngModel)]="selectedExCustomerName"
                                   [typeahead]="allCustomers"
                                   (typeaheadOnSelect)="onSelectExCustomer($event)"
                                   [typeaheadOptionField]="'name'" />
                        </div>
                    </li>
                </ul>
            </div>

            <div class="recipient" *ngIf="selectedCustomer != null">
                <form class="form-horizontal" #myForm="ngForm" [ngFormModel]="recipientGroup">
                    <div class="form-group">
                        <label for="inputRecipient" class="col-sm-2 control-label">收件人</label>
                        <div class="col-sm-10">
                            <div *ngIf="!viewMode">
                                <input type="text" class="form-control" id="inputRecipient" maxlength="10" required ngControl="recipient" #recipient="ngForm"
                                       (ngModelChange)="onModelChanged($event, true)">
                                <div [hidden]="recipient.valid || recipient.pristine" class="alert alert-danger">
                                    收件人不能为空
                                </div>
                            </div>
                            <label class="control-label" *ngIf="viewMode">{{orderModel.recipient}}</label>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="inputPhone" class="col-sm-2 control-label">电话</label>
                        <div class="col-sm-10">
                            <div *ngIf="!viewMode">
                                <input type="tel" class="form-control" id="inputPhone" required ngControl="phone" #phone="ngForm"
                                       (ngModelChange)="onModelChanged($event, true)">
                                <div [hidden]="phone.valid || phone.pristine" class="alert alert-danger">
                                    收件人电话不能为空
                                </div>
                            </div>
                            <label class="control-label" *ngIf="viewMode">{{orderModel.phone}}</label>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="inputAddress" class="col-sm-2 control-label">地址</label>
                        <div class="col-sm-10">
                            <div *ngIf="!viewMode">
                                <input type="text" class="form-control" id="inputAddress" maxlength="100" required ngControl="address" #address="ngForm"
                                       (ngModelChange)="onModelChanged($event, true)">
                                <div [hidden]="address.valid || address.pristine" class="alert alert-danger">
                                    收件人地址不能为空
                                </div>
                            </div>
                            <label class="control-label" *ngIf="viewMode">{{orderModel.address}}</label>
                        </div>
                    </div>
                </form>
            </div>

            <div class="order-date" [class.hidden]="selectedCustomer == null">
                <form class="form-horizontal" #expressForm="ngForm" [ngFormModel]="expressGroup">
                    <div class="form-group">
                        <label for="orderDate" class="col-sm-2 control-label">下单时间</label>
                        <div class="col-sm-10">
                            <div [class.hidden]="viewMode">
                                <div class="input-group date" id="orderDate" [class.has-error]="!isOrderDateValid">
                                    <input type="text" class="form-control" style="background-color:#FFF" readonly="readonly" required />
                                    <span class="input-group-addon">
                                        <span class="glyphicon glyphicon-calendar"></span>
                                    </span>
                                </div>
                            </div>
                            <label class="control-label" *ngIf="viewMode">{{strOrderDate}}</label>
                        </div>
                    </div>
                    <div class="form-group" *ngIf="orderModel.delivered">
                        <label for="inputAddress" class="col-sm-2 control-label">订单号</label>
                        <div class="col-sm-10">
                            <div *ngIf="!viewMode">
                                <div class="input-group">
                                    <input type="text" class="form-control" id="inputWaybill" maxlength="20" required ngControl="waybill" #waybill="ngForm"
                                           (ngModelChange)="onExpressModelChanged($event)">
                                    <div class="input-group-addon"><i class="fa fa-barcode fa-lg"></i></div>
                                </div>
                           
                                <div [hidden]="waybill.valid || waybill.pristine" class="alert alert-danger">
                                    订单号不能为空
                                </div>
                            </div>
                            <label class="control-label" *ngIf="viewMode">{{orderModel.address}}</label>
                        </div>
                    </div>
                    <div class="form-group" *ngIf="orderModel.delivered">
                        <label for="inputWeight" class="col-sm-2 control-label">重量</label>
                        <div class="col-sm-10">
                            <div *ngIf="!viewMode">
                                <div class="input-group">
                                    <input type="number" class="form-control" id="inputWeight" min="1" required ngControl="weight" #weight="ngForm"
                                           (ngModelChange)="onExpressModelChanged($event)">
                                    <div class="input-group-addon">kg</div>
                                </div>
                             
                                <div [hidden]="weight.valid || weight.pristine" class="alert alert-danger">
                                    重量不能为空
                                </div>
                            </div>
                            <label class="control-label" *ngIf="viewMode">{{orderModel.weight}}</label>
                        </div>
                    </div>
                    <div class="form-group" *ngIf="orderModel.delivered">
                        <label for="inputFreight" class="col-sm-2 control-label">运费</label>
                        <div class="col-sm-10">
                            <div *ngIf="!viewMode">
                                <div class="input-group">
                                    <input type="number" class="form-control" id="inputFreight" min="0" step="0.1" required ngControl="freight" #freight="ngForm"
                                           (ngModelChange)="onExpressModelChanged($event)">
                                    <div class="input-group-addon">$</div>
                                </div>
                               
                                <div [hidden]="freight.valid || freight.pristine" class="alert alert-danger">
                                    运费不能为空
                                </div>
                            </div>
                            <label class="control-label" *ngIf="viewMode">{{orderModel.freight}}</label>
                        </div>
                    </div>
                </form>
            </div>
        </td>
    </tr>
</table>